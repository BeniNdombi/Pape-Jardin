<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Admin - R√©sultats</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 50px;
    }
    #login, #results { display: none; }
  </style>
</head>
<body>
  <h1>Page d'administration</h1>

  <div id="login">
    <p>Mot de passe requis :</p>
    <input type="password" id="password">
    <button onclick="checkPassword()">Valider</button>
    <p id="error" style="color: red;"></p>
  </div>

  <div id="results">
    <h2>R√©sultats du vote</h2>
    <ul id="voteResults"></ul>
  </div>

  <script>
    const CORRECT_PASSWORD = "bebe1503"; // üîê Change ce mot de passe ici

    document.getElementById("login").style.display = "block";

    function checkPassword() {
      const entered = document.getElementById("password").value;
      if (entered === CORRECT_PASSWORD) {
        document.getElementById("login").style.display = "none";
        document.getElementById("results").style.display = "block";
        fetchResults();
      } else {
        document.getElementById("error").innerText = "Mot de passe incorrect.";
      }
    }

    async function fetchResults() {
      const res = await fetch('/results');
      const data = await res.json();
      const ul = document.getElementById("voteResults");
      ul.innerHTML = '';
      for (const candidate in data) {
        const li = document.createElement("li");
        li.textContent = `${candidate} : ${data[candidate]} vote(s)`;
        ul.appendChild(li);
      }
    }
  </script>
</body>
</html>
